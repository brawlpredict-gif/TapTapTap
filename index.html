<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>IljaClicker</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #111;
    color: white;
    display: flex;
    height: 100vh;
    overflow: hidden;
}

/* левая зона — игра */
#gameArea {
    flex: 3;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}

/* правая зона — апгрейды */
#shop {
    flex: 1;
    background-color: #222;
    padding: 20px;
    box-sizing: border-box;
}

#score {
    font-size: 48px;
    margin-bottom: 20px;
}

#imageContainer {
    position: relative;
    display: inline-block;
    overflow: hidden;
}

/* фото */
#image {
    width: 600px;
    cursor: pointer;
    user-select: none;
    display: block;
}

/* ripple */
.ripple {
    position: absolute;
    border-radius: 50%;
    border: 3px solid rgba(0,255,255,0.7);
    width: 100px;
    height: 100px;
    transform: scale(0);
    animation: rippleAnim 0.5s linear;
}

@keyframes rippleAnim {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

/* +1 */
.plusOne {
    position: absolute;
    color: #00ff88;
    font-size: 32px;
    font-weight: bold;
    pointer-events: none;
    animation: floatUp 0.8s ease-out forwards;
}

@keyframes floatUp {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(-80px); }
}

/* линза рыбьего глаза */
.lens {
    position: absolute;
    width: 180px;
    height: 180px;
    border-radius: 50%;
    overflow: hidden;
    pointer-events: none;
    animation: lensAnim 0.35s ease-out forwards;
}

.lens img {
    position: absolute;
    width: 600px;
    height: auto;
    transform: scale(1.4);
}

@keyframes lensAnim {
    0% { transform: scale(0.5); opacity: 0.9; }
    100% { transform: scale(1.2); opacity: 0; }
}

/* кнопка апгрейда */
.upgradeButton {
    display: block;
    width: 100%;
    padding: 15px;
    margin-bottom: 15px;
    font-size: 22px;
    background-color: #00ff88;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

.upgradeButton:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#shop h2 {
    margin-top: 0;
}

</style>
</head>

<body>

<div id="gameArea">
    <div id="score">0</div>
    <div id="imageContainer">
        <img src="brother.png" id="image">
    </div>
</div>

<div id="shop">
    <h2>Магазин апгрейдов</h2>
    <button class="upgradeButton" id="doubleClickBtn">Двойной клик (100 очков)</button>
    <button class="upgradeButton" id="tripleClickBtn">Тройной клик (500 очков)</button>
</div>

<script>
let score = 0;
let clickValue = 1; // сколько очков за клик
let container = document.getElementById("imageContainer");
let image = document.getElementById("image");
let scoreDiv = document.getElementById("score");

let doubleBtn = document.getElementById("doubleClickBtn");
let tripleBtn = document.getElementById("tripleClickBtn");

// быстрый звук
function playClickSound() {
    let audio = new Audio("click.mp3");
    audio.volume = 0.3;
    audio.play();
}

// обновление состояния кнопок
function updateButtons() {
    doubleBtn.disabled = score < 100;
    tripleBtn.disabled = score < 300;
}

// обработка клика по картинке
image.addEventListener("pointerdown", function(event) {
    score += clickValue;
    scoreDiv.innerText = score;

    playClickSound();

    let rect = container.getBoundingClientRect();
    let x = event.clientX - rect.left;
    let y = event.clientY - rect.top;

    // ripple
    let ripple = document.createElement("div");
    ripple.className = "ripple";
    ripple.style.left = (x - 50) + "px";
    ripple.style.top = (y - 50) + "px";
    container.appendChild(ripple);
    setTimeout(() => ripple.remove(), 500);

    // +1
    let plus = document.createElement("div");
    plus.className = "plusOne";
    plus.innerText = "+" + clickValue;
    plus.style.left = x + "px";
    plus.style.top = y + "px";
    container.appendChild(plus);
    setTimeout(() => plus.remove(), 800);

    // линза рыбьего глаза
    let lens = document.createElement("div");
    lens.className = "lens";
    lens.style.left = (x - 90) + "px";
    lens.style.top = (y - 90) + "px";

    let zoomed = document.createElement("img");
    zoomed.src = image.src;
    zoomed.style.left = -(x - 90) * 1.4 + "px";
    zoomed.style.top = -(y - 90) * 1.4 + "px";

    lens.appendChild(zoomed);
    container.appendChild(lens);
    setTimeout(() => lens.remove(), 350);

    updateButtons();
});

// покупка апгрейда: двойной клик
doubleBtn.addEventListener("click", function() {
    if(score >= 100){
        score -= 100;
        clickValue = 2;
        scoreDiv.innerText = score;
        updateButtons();
        doubleBtn.disabled = true;
        doubleBtn.innerText = "Двойной клик куплен!";
    }
});

// покупка апгрейда: тройной клик
tripleBtn.addEventListener("click", function() {
    if(score >= 300){
        score -= 300;
        clickValue = 3;
        scoreDiv.innerText = score;
        updateButtons();
        tripleBtn.disabled = true;
        tripleBtn.innerText = "Тройной клик куплен!";
    }
});

// начальное обновление кнопок
updateButtons();

</script>

</body>
</html>
