<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>BriAU Clicker</title>

<style>

html, body{
    margin:0;
    padding:0;
    background:#111; /* дефолтный фон */
    color:white;
    font-family:Arial;
    overflow:hidden;
    touch-action: manipulation;
}

.container{
    display:flex;
    height:100vh;
    width:100vw;
    background:#111; /* важно */
}

.left{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

#score{
    font-size:28px;
    margin-bottom:10px;
}

.imageContainer{
    position:relative;
}

#image{
    width:60vw;
    max-width:320px;
    border-radius:20px;
    user-select:none;
    -webkit-user-drag:none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    transition: transform 0.1s;
}

#image:active{
    transform:scale(1.08);
}

.ripple{
    position:absolute;
    border-radius:50%;
    border:3px solid white;
    width:20px;
    height:20px;
    animation:rippleAnim 0.5s linear;
}

@keyframes rippleAnim{
    from{transform:scale(1);opacity:1;}
    to{transform:scale(6);opacity:0;}
}

.plus{
    position:absolute;
    color:#00ff99;
    font-weight:bold;
    animation:plusAnim 0.6s linear;
}

@keyframes plusAnim{
    from{transform:translateY(0);opacity:1;}
    to{transform:translateY(-40px);opacity:0;}
}

.shop{
    width:40vw;
    max-width:200px;
    background:#222; /* дефолт */
    padding:10px;
    display:flex;
    flex-direction:column;
    transition: background 0.3s;
}

button{
    margin:5px 0;
    padding:10px;
    font-size:16px;
    border:none;
    border-radius:10px;
    background:#444; /* дефолт */
    color:white;
    transition: background 0.3s;
}

button:disabled{
    background:#222;
    color:#777;
}

.snowCat{
    position:absolute;
    width:40px;
    pointer-events:none;
    animation:snowFall linear forwards;
}

@keyframes snowFall{
    from{transform:translateY(0);}
    to{transform:translateY(100vh);}
}

</style>
</head>
<body>

<div class="container" id="container">

<div class="left">

<div id="score">Очки: 0</div>

<div class="imageContainer">
<img src="brother.png" id="image">
</div>

</div>

<div class="shop" id="shop">

<div>Апгрейды</div>

<button id="double">Двойной клик (100)</button>
<button id="triple">Тройной клик (300)</button>
<button id="catEvent">Cat Event (500)</button>

</div>

</div>

<audio id="clickSound" src="click.mp3"></audio>
<audio id="eventSound" src="special.mp3"></audio>

<script>

let score=0;
let clickValue=1;

let boughtDouble=false;
let boughtTriple=false;
let boughtEvent=false;

let scoreText=document.getElementById("score");
let image=document.getElementById("image");

let doubleBtn=document.getElementById("double");
let tripleBtn=document.getElementById("triple");
let eventBtn=document.getElementById("catEvent");

let shop=document.getElementById("shop");
let container=document.getElementById("container");

let clickSound=document.getElementById("clickSound");
let eventSound=document.getElementById("eventSound");

let catInterval=null;
let discoInterval=null;

function update(){

scoreText.innerText="Очки: "+score;

doubleBtn.disabled=boughtDouble || score<100;
tripleBtn.disabled=boughtTriple || score<300;
eventBtn.disabled=boughtEvent || score<500;

}

function createCat(){

let cat=document.createElement("img");

cat.src="cat.png";
cat.className="snowCat";

cat.style.left=Math.random()*window.innerWidth+"px";
cat.style.top="-40px";
cat.style.animationDuration=(3+Math.random()*2)+"s";

document.body.appendChild(cat);

setTimeout(()=>cat.remove(),5000);

}

image.onclick=function(e){

score+=clickValue;

clickSound.currentTime=0;
clickSound.play();

update();

}

doubleBtn.onclick=function(){

if(score>=100 && !boughtDouble){

score-=100;
clickValue=2;

boughtDouble=true;

doubleBtn.innerText="Куплено";

update();

}

}

tripleBtn.onclick=function(){

if(score>=300 && !boughtTriple){

score-=300;
clickValue=3;

boughtTriple=true;

tripleBtn.innerText="Куплено";

update();

}

}

eventBtn.onclick=function(){

if(score>=500 && !boughtEvent){

score-=500;

boughtEvent=true;

eventBtn.innerText="Куплено";

eventSound.play();

update();

let duration=218000;

/* коты */
catInterval=setInterval(createCat,250);

/* диско */
discoInterval=setInterval(()=>{

let color="hsl("+Math.random()*360+",80%,30%)";

document.body.style.background=color;
container.style.background=color;
shop.style.background=color;

doubleBtn.style.background=color;
tripleBtn.style.background=color;
eventBtn.style.background=color;

},200);

/* конец события */
setTimeout(()=>{

clearInterval(catInterval);
clearInterval(discoInterval);

/* возвращаем дефолт */
document.body.style.background="#111";
container.style.background="#111";
shop.style.background="#222";

doubleBtn.style.background="#444";
tripleBtn.style.background="#444";
eventBtn.style.background="#444";

},duration);

}

}

update();

</script>

</body>
</html>
