<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">

<!-- фиксирует масштаб и запрещает zoom -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>IljaClicker</title>

<style>

html, body{
    margin:0;
    padding:0;
    background:#111;
    color:white;
    font-family:Arial;
    overflow:hidden;

    touch-action: manipulation;
}

/* главный контейнер */
.container{
    display:flex;
    height:100vh;
    width:100vw;
}

/* левая часть */
.left{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

/* счет */
#score{
    font-size:28px;
    margin-bottom:10px;
}

/* контейнер картинки */
.imageContainer{
    position:relative;
}

/* картинка */
#image{

    width:60vw;
    max-width:320px;
    height:auto;

    border-radius:20px;

    user-select:none;
    -webkit-user-drag:none;
    -webkit-tap-highlight-color: transparent;

    touch-action: manipulation;

    transition: transform 0.1s;
}

/* эффект увеличения */
#image:active{
    transform: scale(1.08);
}

/* ripple */
.ripple{

    position:absolute;
    border-radius:50%;
    border:3px solid white;

    width:20px;
    height:20px;

    animation:rippleAnim 0.5s linear;
}

@keyframes rippleAnim{

    from{
        transform:scale(1);
        opacity:1;
    }

    to{
        transform:scale(6);
        opacity:0;
    }

}

/* +очки */
.plus{

    position:absolute;
    color:#00ff99;
    font-weight:bold;

    animation:plusAnim 0.6s linear;
}

@keyframes plusAnim{

    from{
        transform:translateY(0);
        opacity:1;
    }

    to{
        transform:translateY(-40px);
        opacity:0;
    }

}

/* магазин */
.shop{

    width:40vw;
    max-width:200px;

    background:#222;

    padding:10px;

    display:flex;
    flex-direction:column;
}

/* кнопки */
button{

    margin:5px 0;
    padding:10px;

    font-size:16px;

    border:none;
    border-radius:10px;

    background:#444;
    color:white;
}

button:disabled{
    background:#222;
    color:#777;
}

</style>

</head>
<body>

<div class="container">

<div class="left">

<div id="score">Очки: 0</div>

<div class="imageContainer">

<img src="brother.png" id="image">


</div>

</div>

<div class="shop">

<div>Апгрейды</div>

<button id="double">Двойной клик (100)</button>

<button id="triple">Тройной клик (300)</button>

</div>

</div>

<audio id="sound" src="click.mp3"></audio>

<script>

let score = 0;
let clickValue = 1;

let doubleBought = false;
let tripleBought = false;

let scoreText = document.getElementById("score");

let image = document.getElementById("image");

let sound = document.getElementById("sound");

let doubleBtn = document.getElementById("double");
let tripleBtn = document.getElementById("triple");


function update(){

scoreText.innerText = "Очки: " + score;

if(doubleBought)
doubleBtn.disabled = true;
else
doubleBtn.disabled = score < 100;


if(tripleBought)
tripleBtn.disabled = true;
else
tripleBtn.disabled = score < 300;

}


// тап
image.addEventListener("click", function(e){

score += clickValue;

sound.currentTime = 0;
sound.play();

let rect = image.getBoundingClientRect();

let x = e.clientX - rect.left;
let y = e.clientY - rect.top;


// ripple
let ripple = document.createElement("div");
ripple.className = "ripple";
ripple.style.left = x + "px";
ripple.style.top = y + "px";

image.parentElement.appendChild(ripple);

setTimeout(()=>{
ripple.remove();
},500);


// +очки
let plus = document.createElement("div");
plus.className = "plus";
plus.innerText = "+" + clickValue;

plus.style.left = x + "px";
plus.style.top = y + "px";

image.parentElement.appendChild(plus);

setTimeout(()=>{
plus.remove();
},600);


update();

});


// двойной
doubleBtn.onclick = function(){

if(score >= 100 && !doubleBought){

score -= 100;

clickValue = 2;

doubleBought = true;

update();

}

};


// тройной
tripleBtn.onclick = function(){

if(score >= 300 && !tripleBought){

score -= 300;

clickValue = 3;

tripleBought = true;

update();

}

};


update();

</script>

</body>
</html>

